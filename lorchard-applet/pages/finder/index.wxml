<!--引入模板recommend-goods-item.wxml-->
<import src="../../templates/recommend-goods-item/recommend-goods-item.wxml" />
<!--引入模板wxSearch.wxml-->
<import src="../../templates/wxSearch/wxSearch.wxml" />

<!--主体-->
<view class="container">
  <!--搜索视图-->
  <view class="search-view" style="background:{{ scrollTop === 0 ?'-webkit-linear-gradient(top, rgba(105,195,170, 1), rgba(105,195,170, 0.3))' :( scrollTop<200 ? 'rgba(105,195,170,'+(scrollTop/400+0.3) +')' : 'rgba(105,195,170,1)')  }} ">
    <!--搜索视图主体-->
    <view class="serarch-content">
      <!--放大镜图标-->
      <view class='search-icon-view'>
        <wxc-icon class='search-icon' type='search-square' size='40' color='#69c3aa'></wxc-icon>
      </view>
      <!--搜索输入框-->
      <input placeholder="请输入搜索内容" class="search-input" maxlength="30" confirm-type="搜索" bindinput='wxSearchInput' value='{{keyword}}' bindconfirm='wxSearchFn' bindfocus="wxSerchFocus" bindblur="wxSearchBlur">
      </input>
      <!--搜索按钮-->
      <button class='search-btn' bindtap="wxSearchFn">搜索</button>
    </view>
    <!--使用模板-->
    <template is="wxSearch" data="{{wxSearchData}}" />
  </view>
  <!--无作用-->
  <view style='height:100rpx;'></view>
  <!--介绍栏 店铺优惠券-->
  <view class="introduced">
    <wxc-loadmore class='introduced-text' is-end="{{true}}" text="店铺优惠券"></wxc-loadmore>
    <!--<image class="introudced-img" src="{{couponsTitlePicStr}}"></image>-->
  </view>
  <!--优惠券展示-->
  <!--如果存在优惠券-->
  <wxc-flex wx:if='{{!hasNoCoupons}}' class='coupons' cross="center" wrap='wrap'>
    <!--网络错误-->
    <wxc-toast wx:if="{{!networkStatus}}" is-show="{{true}}" text="联网失败，请刷新重试" icon="warning" icon-color="#ff5777"></wxc-toast>
    <!--优惠券加载中-->
    <wxc-toast wx:if="{{couponsStatus===0}}" is-show="{{true}}" text="优惠券加载中···"></wxc-toast>
    <!--优惠券加载完成-->
    <wxc-toast wx:elif="{{couponsStatus===1}}" is-show="{{true}}" text="加载成功" icon="yes"></wxc-toast>
    <!--遍历优惠券-->
    <view class="coupons-item" wx:for-items="{{coupons}}" wx:for-index="idx" wx:key="id" bindtap="gitCoupon" data-id="{{item.id}}">
      <!--优惠券-->
      <view class='coupons-date-money'>
        <!--优惠券信息展示-->
        <view class='coupons-info'>
          <text style='font-size:24rpx;'> 满 </text>
          <text style='font-size:28rpx;font-weight: bolder;color:#353535;'>{{item.moneyHreshold}} </text>
          <text style='font-size:24rpx;'>元使用 \n</text>
          <text style='font-size:28rpx;font-weight: bolder;color:#353535;' wx:if="{{item.dateEndType == 0}}"> {{item.dateEnd}} </text>
          <text style='font-size:24rpx;' wx:if="{{item.dateEndType == 0}}"> 前有效\n </text>
          <text style='font-size:24rpx;' wx:if="{{item.dateEndType == 1}}"> 领取后 </text>
          <text style='font-size:28rpx;font-weight: bolder;color:#353535;' wx:if="{{item.dateEndType == 1}}"> {{item.dateEndDays}}</text>
          <text style='font-size:24rpx;' wx:if="{{item.dateEndType == 1}}"> 天内有效</text>
        </view>
        <!--优惠券价值-->
        <view class='coupons-money'>
          <text> ¥\n {{item.moneyMax}} </text>
        </view>
      </view>
      <!--优惠券名字-->
      <view class='coupons-name'>
        <text> {{item.name}}\n </text>
      </view>
    </view>
    <!--优惠券被领完-->
    <wxc-toast wx:if="{{getCoupStatus===0}}" is-show="{{true}}" text="来晚了" icon="no"></wxc-toast>
    <!--优惠券领取成功-->
    <wxc-toast wx:elif="{{getCoupStatus===1}}" is-show="{{true}}" text="领取成功，赶紧去下单吧~" icon="yes" icon-color="#ff5777"></wxc-toast>
    <!--已领过优惠券-->
    <wxc-toast wx:elif="{{getCoupStatus===2}}" is-show="{{true}}" text="你领过了，别贪心哦~" icon="no"></wxc-toast>
    <!--积分不够领取-->
    <wxc-toast wx:elif="{{getCoupStatus===3}}" is-show="{{true}}" text="您的积分不足~" icon="no"></wxc-toast>
    <!--优惠券过期-->
    <wxc-toast wx:elif="{{getCoupStatus===4}}" is-show="{{true}}" text="已过期~" icon="no"></wxc-toast>
    <!--分隔线-->
    <view style='width: 100%;height: 10rpx;'></view>
  </wxc-flex>
  <!--如果不存在优惠券-->
  <wxc-flex wx:elif='{{hasNoCoupons}}' class='coupons' cross="center" wrap='wrap' style="{{display}}">
    <wxc-toast is-show="{{true}}" text="暂无优惠券可领" icon="no" bindtap="couponDisplay"></wxc-toast>
    <view style='width: 100%;height: 10rpx;'></view>
  </wxc-flex>
</view>
<!--更多精彩-->
<view class='more-things'>
  <image src='https://cdn.it120.cc/apifactory/2017/12/27/605e53ea7d6cab4c289d8357b6ff0e2e.png' style='width:450rpx;height:220rpx;'>
  </image>
</view>